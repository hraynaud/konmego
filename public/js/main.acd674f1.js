(function(e){function t(t){for(var n,i,a=t[0],l=t[1],u=t[2],A=0,p=[];A<a.length;A++)i=a[A],o[i]&&p.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var l=r[a];0!==o[l]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={main:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var c=l;s.push(["2763","chunk-vendors"]),r()})({2763:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),o=r("9483");Object(o["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var s=r("f499"),i=r.n(s),a=r("795b"),l=r.n(a),u=r("04e1"),c=r.n(u),A="jwt",p="user",d=window,f=d.localStorage,m=d.sessionStorage,v={login:g,logout:h,currentUser:w};function g(e,t){return D.post("/login",{email:e,password:t}).then(b)}function h(){f.removeItem(p),m.removeItem(A,"")}function w(){return JSON.parse(f.getItem(p))}function b(e){if(!e.data.jwt)return l.a.reject(e.error);j(e.data.jwt)}function j(e){m.setItem(A,e);var t=function(e){var t=e.first,r=e.last;return{first:t,last:r}}(c()(e));f.setItem(p,i()(t))}var C=r("cebc"),E=r("7065"),_=r.n(E),I=r("bc3a"),y=r.n(I),Q=window,k=Q.sessionStorage,O={baseURL:"".concat(_.a.apiUrl),headers:{"Content-Type":"application/json",Authorization:k.getItem(A)}};function M(e,t){return U("POST",e,P(t))}function x(e,t){return U("GET",e,{},t)}function U(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return y()(S(Object(C["a"])({method:e},r,n),t)).catch(G)}function S(e,t){return Object(C["a"])({},O,e,{url:t})}function P(e){return{data:i()(e)}}function G(e){var t;throw t=e.response?e.response.data.error:e.request?"Server not responding":"Unable to connect to API",new Error(t)}var D={post:M,get:x},B=(new n["a"],r("6762"),r("8c4f")),H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Hi "+e._s(e.user))]),r("p",[e._v("You're logged in.")]),r("p",[r("router-link",{attrs:{to:"/login"}},[e._v("logout")])],1),r("p",[r("router-link",{attrs:{to:"/home"}},[e._v("Home")])],1),r("p",[r("router-link",{attrs:{to:"/projects"}},[e._v("Projects")])],1)])},J=[],K={props:{user:String}},R=K,Y=r("2877"),N=Object(Y["a"])(R,H,J,!1,null,null,null),F=N.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Project Page "+e._s(e.project))]),r("p",[r("router-link",{attrs:{to:"/login"}},[e._v("logout")])],1),r("p",[r("router-link",{attrs:{to:"/home"}},[e._v("Home")])],1)])},L=[],q={props:{project:String},beforeRouteEnter:function(e,t,r){D.get("api/v1/projects").then(function(e){r()}).catch(function(e){r(function(e){e.$router.push("/error")})})}},z=q,W=Object(Y["a"])(z,T,L,!1,null,null,null),V=W.exports,Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("Login")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("div",{},[r("label",{attrs:{for:"email"}},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&!e.email},attrs:{type:"text",name:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.submitted&&!e.email,expression:"submitted && !email"}],staticClass:"invalid-feedback"},[e._v("Username is required")])]),r("div",{},[r("label",{attrs:{for:"password"}},[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",class:{"is-invalid":e.submitted&&!e.password},attrs:{type:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.submitted&&!e.password,expression:"submitted && !password"}],staticClass:"invalid-feedback"},[e._v("Password is required")])]),r("div",{},[r("button",{staticClass:"btn btn-primary",attrs:{disabled:e.loading}},[e._v("Login")]),r("img",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}})]),e.error?r("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):e._e()])])},$=[],X={data:function(){return{email:"",password:"",submitted:!1,loading:!1,returnUrl:"",error:""}},created:function(){v.logout(),this.returnUrl=this.$route.query.returnUrl||"/"},methods:{handleSubmit:function(e){var t=this;this.submitted=!0;var r=this.email,n=this.password;r&&n&&(this.loading=!0,v.login(r,n).then(function(){return t.loading=!1,ue.push(t.returnUrl)}).catch(function(e){t.error=e.message,t.loading=!1}))}}},ee=X,te=Object(Y["a"])(ee,Z,$,!1,null,null,null),re=te.exports,ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("ERROR")]),r("h2",[e._v(e._s(e.message))]),r("p",[r("router-link",{attrs:{to:"/home"}},[e._v("Home")])],1)])},oe=[],se={props:{message:String}},ie=se,ae=Object(Y["a"])(ie,ne,oe,!1,null,null,null),le=ae.exports;n["a"].use(B["a"]);var ue=new B["a"]({mode:"history",routes:[{path:"/",component:F,props:ce},{path:"/login",component:re},{path:"/projects",component:V,props:!0},{path:"/error",name:"error",component:le,props:!0},{path:"*",redirect:"/"}]});function ce(e){return{user:v.currentUser().first}}ue.beforeEach(function(e,t,r){var n=["/login","/projects","/error"],o=!n.includes(e.path);if(o&&!v.currentUser())return r({path:"/login",query:{returnUrl:e.path}});r()}),ue.onError(function(e){ue.push({name:"error",params:{message:e.message}})});var Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"jumbotron"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6 offset-sm-3"},[r("router-view")],1)])])])},pe=[],de={name:"app"},fe=de,me=Object(Y["a"])(fe,Ae,pe,!1,null,null,null),ve=me.exports;r("92c6");n["a"].config.productionTip=!1,new n["a"]({el:"#app",router:ue,render:function(e){return e(ve)}})},7065:function(e,t){e.exports={apiUrl:""}}});
//# sourceMappingURL=main.acd674f1.js.map